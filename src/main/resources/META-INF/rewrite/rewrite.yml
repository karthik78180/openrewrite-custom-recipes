---
type: specs.openrewrite.org/v1beta/recipe
name: com.recipies.yaml.AllMigrations
displayName: Upgrade Gradle to 8.14 and Apply Custom Recipes with Checkstyle Formatting
description: Comprehensive migration combining Gradle upgrade (8.13), base class transformations, constant updates, Vert.x JDBC migration (3.9.16 to 5.0.5), and Checkstyle-compliant formatting.
recipeList:
  - org.openrewrite.gradle.UpdateGradleWrapper:
      version: "8.13"
      distributionUrl: "https://services.gradle.org/distributions/gradle-8.13-bin.zip"
      distributionSha256Sum: "20f1b1176237254a6fc204d8434196fa11a4cfb387567519c61556e8710aed78"
      distributionType: "bin"
      archivePathPattern: "wrapper/dists"
  - com.rewrite.Java21MigrationRecipes
  - com.recipies.yaml.VertxJdbcMigrations
  - com.recipies.yaml.CheckstyleFormatting
---
type: specs.openrewrite.org/v1beta/recipe
name: com.recipies.yaml.VertxJdbcMigrations
displayName: Migrate Vert.x JDBC from 3.9.16 to 5.0.5
description: Comprehensive migration of Vert.x JDBC client from version 3.9.16 to 5.0.5, including dependency updates and API changes.
recipeList:
  # Remove vertx-sql-common dependency (merged into vertx-jdbc-client in 4.x+)
  - org.openrewrite.gradle.RemoveDependency:
      groupId: io.vertx
      artifactId: vertx-sql-common
  # Update vertx-jdbc-client to 5.0.5
  - org.openrewrite.gradle.UpgradeDependencyVersion:
      groupId: io.vertx
      artifactId: vertx-jdbc-client
      newVersion: 5.0.5
  - org.openrewrite.gradle.UpgradeDependencyVersion:
      groupId: io.vertx
      artifactId: vertx-core
      newVersion: 5.0.5
  # Apply code transformations for Vert.x JDBC migration
  - com.rewrite.VertxJdbcClientToPoolRecipe
  - com.recipies.yaml.VertxJdbcImportMigrations
---
type: specs.openrewrite.org/v1beta/recipe
name: com.recipies.yaml.VertxJdbcImportMigrations
displayName: Migrate Vert.x JDBC imports
description: Updates import statements for Vert.x JDBC client migration from 3.x to 5.x.
recipeList:
  # Change JDBCClient to JDBCPool
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: io.vertx.ext.jdbc.JDBCClient
      newFullyQualifiedTypeName: io.vertx.jdbcclient.JDBCPool
  # Change SQLClient to JDBCPool (as it's merged into JDBC client in 4.x+)
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: io.vertx.ext.sql.SQLClient
      newFullyQualifiedTypeName: io.vertx.jdbcclient.JDBCPool
  # Update SQLConnection to SqlConnection (new package)
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: io.vertx.ext.sql.SQLConnection
      newFullyQualifiedTypeName: io.vertx.sqlclient.SqlConnection
---
type: specs.openrewrite.org/v1beta/recipe
name: com.recipies.yaml.CheckstyleFormatting
displayName: Apply Checkstyle formatting and Java code style rules
description: >-
  Comprehensive recipe for applying Checkstyle-compliant formatting to Java code.
  Enforces: no consecutive blank lines, proper indentation,
  proper import ordering, modifier order, and code style standards.
recipeList:
  # Automatic Java code formatting with proper indentation
  - org.openrewrite.java.format.AutoFormat
  # Ensure proper spacing in blank lines (max 1 consecutive blank line)
  - org.openrewrite.java.format.BlankLines:
      maxConsecutiveBlankLines: 1
  # Ensure empty newline at end of file
  - org.openrewrite.java.format.EmptyNewlineAtEndOfFile
  - org.openrewrite.java.format.RemoveTrailingWhitespace
  # Ensure proper import ordering (matches Checkstyle ImportOrder configuration)
  - org.openrewrite.java.OrderImports:
      groups:
        - "*"
        - "javax"
        - "java"
      separatedStaticGroups: true
      sortStaticImportsAlphabetically: true
      removeUnusedImports: true
      removeUnusedNamedImports: true
---
type: specs.openrewrite.org/v1beta/recipe
name: com.recipies.yaml.UpdateLambdaSchemaVersion
displayName: Update Lambda Config Schema Version to 2.12.0
description: Updates the schemaVersion field in config/*/lambda.json files to 2.12.0 if it's not already set to that value.
recipeList:
  - com.rewrite.UpdateLambdaSchemaVersionRecipe
